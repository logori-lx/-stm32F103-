\hypertarget{stm32f10x__can_8c}{}\doxysection{src/stm32f10x\+\_\+can.c File Reference}
\label{stm32f10x__can_8c}\index{src/stm32f10x\_can.c@{src/stm32f10x\_can.c}}


This file provides all the C\+AN firmware functions.  


{\ttfamily \#include \char`\"{}stm32f10x\+\_\+can.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stm32f10x\+\_\+rcc.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries M\+C\+R\+\_\+\+D\+BF}~((uint32\+\_\+t)0x00010000) /$\ast$ software master reset $\ast$/
\item 
\#define {\bfseries T\+M\+I\+Dx\+R\+\_\+\+T\+X\+RQ}~((uint32\+\_\+t)0x00000001) /$\ast$ Transmit mailbox request $\ast$/
\item 
\#define {\bfseries F\+M\+R\+\_\+\+F\+I\+N\+IT}~((uint32\+\_\+t)0x00000001) /$\ast$ Filter init mode $\ast$/
\item 
\#define {\bfseries I\+N\+A\+K\+\_\+\+T\+I\+M\+E\+O\+UT}~((uint32\+\_\+t)0x0000\+F\+F\+FF)
\item 
\#define {\bfseries S\+L\+A\+K\+\_\+\+T\+I\+M\+E\+O\+UT}~((uint32\+\_\+t)0x0000\+F\+F\+FF)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+F\+L\+A\+G\+S\+\_\+\+T\+SR}~((uint32\+\_\+t)0x08000000)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+F\+L\+A\+G\+S\+\_\+\+R\+F1R}~((uint32\+\_\+t)0x04000000)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+F\+L\+A\+G\+S\+\_\+\+R\+F0R}~((uint32\+\_\+t)0x02000000)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+F\+L\+A\+G\+S\+\_\+\+M\+SR}~((uint32\+\_\+t)0x01000000)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+F\+L\+A\+G\+S\+\_\+\+E\+SR}~((uint32\+\_\+t)0x00\+F00000)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+T\+X\+M\+A\+I\+L\+B\+O\+X\+\_\+0}~((uint8\+\_\+t)0x00)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+T\+X\+M\+A\+I\+L\+B\+O\+X\+\_\+1}~((uint8\+\_\+t)0x01)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+T\+X\+M\+A\+I\+L\+B\+O\+X\+\_\+2}~((uint8\+\_\+t)0x02)
\item 
\#define {\bfseries C\+A\+N\+\_\+\+M\+O\+D\+E\+\_\+\+M\+A\+SK}~((uint32\+\_\+t) 0x00000003)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga002b74cd69574a14b17ad445090245cd}{C\+A\+N\+\_\+\+De\+Init}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx)
\begin{DoxyCompactList}\small\item\em Deinitializes the C\+AN peripheral registers to their default reset values. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga9023c35a9ab931ad4513fc5d19b4bd6c}{C\+A\+N\+\_\+\+Init}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, \mbox{\hyperlink{struct_c_a_n___init_type_def}{C\+A\+N\+\_\+\+Init\+Type\+Def}} $\ast$C\+A\+N\+\_\+\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Initializes the C\+AN peripheral according to the specified parameters in the C\+A\+N\+\_\+\+Init\+Struct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga39476830280340363c51041be6b12647}{C\+A\+N\+\_\+\+Filter\+Init}} (\mbox{\hyperlink{struct_c_a_n___filter_init_type_def}{C\+A\+N\+\_\+\+Filter\+Init\+Type\+Def}} $\ast$C\+A\+N\+\_\+\+Filter\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Initializes the C\+AN peripheral according to the specified parameters in the C\+A\+N\+\_\+\+Filter\+Init\+Struct. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_gad77ad810868ed111755fc9e8ae0c7646}{C\+A\+N\+\_\+\+Struct\+Init}} (\mbox{\hyperlink{struct_c_a_n___init_type_def}{C\+A\+N\+\_\+\+Init\+Type\+Def}} $\ast$C\+A\+N\+\_\+\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Fills each C\+A\+N\+\_\+\+Init\+Struct member with its default value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga109ff8960bc59f44b984c9646f17b3c0}{C\+A\+N\+\_\+\+Slave\+Start\+Bank}} (uint8\+\_\+t C\+A\+N\+\_\+\+Bank\+Number)
\begin{DoxyCompactList}\small\item\em Select the start bank filter for slave C\+AN. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_gac0e2d33e08caf49d1f1251f0dcc20213}{C\+A\+N\+\_\+\+D\+B\+G\+Freeze}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the D\+BG Freeze for C\+AN. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga94740177bab153ca5b102d122f9a8cca}{C\+A\+N\+\_\+\+T\+T\+Com\+Mode\+Cmd}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disabes the C\+AN Time Trigger\+Operation communication mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_gaccfcb81f76f58400077c7b2d8641dd83}{C\+A\+N\+\_\+\+Transmit}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, \mbox{\hyperlink{struct_can_tx_msg}{Can\+Tx\+Msg}} $\ast$Tx\+Message)
\begin{DoxyCompactList}\small\item\em Initiates the transmission of a message. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga68ab05a0a6cdfcc2b6f6b6b2c10848e2}{C\+A\+N\+\_\+\+Transmit\+Status}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint8\+\_\+t Transmit\+Mailbox)
\begin{DoxyCompactList}\small\item\em Checks the transmission of a message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga81106cdf5395a1947bfc87ec1685829e}{C\+A\+N\+\_\+\+Cancel\+Transmit}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint8\+\_\+t Mailbox)
\begin{DoxyCompactList}\small\item\em Cancels a transmit request. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga351b90bb8a3bb0c846f85bbd56ef4dc8}{C\+A\+N\+\_\+\+Receive}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint8\+\_\+t F\+I\+F\+O\+Number, \mbox{\hyperlink{struct_can_rx_msg}{Can\+Rx\+Msg}} $\ast$Rx\+Message)
\begin{DoxyCompactList}\small\item\em Receives a message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga1bc3b39471e579b4101624c33d27918b}{C\+A\+N\+\_\+\+F\+I\+F\+O\+Release}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint8\+\_\+t F\+I\+F\+O\+Number)
\begin{DoxyCompactList}\small\item\em Releases the specified F\+I\+FO. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga7100459a95ce1b3cfe8ab15e112029fe}{C\+A\+N\+\_\+\+Message\+Pending}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint8\+\_\+t F\+I\+F\+O\+Number)
\begin{DoxyCompactList}\small\item\em Returns the number of pending messages. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_gab2a3630e9e3024114eb117d14e514208}{C\+A\+N\+\_\+\+Operating\+Mode\+Request}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint8\+\_\+t C\+A\+N\+\_\+\+Operating\+Mode)
\begin{DoxyCompactList}\small\item\em Select the C\+AN Operation mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga640215e38765759d7eceb8a039046667}{C\+A\+N\+\_\+\+Sleep}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx)
\begin{DoxyCompactList}\small\item\em Enters the low power mode. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga78cdfbf1884b9e33c552bcbca15bed10}{C\+A\+N\+\_\+\+Wake\+Up}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx)
\begin{DoxyCompactList}\small\item\em Wakes the C\+AN up. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_gaaee721a392b6b21bfd15dc160aeb6924}{C\+A\+N\+\_\+\+Get\+Last\+Error\+Code}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx)
\begin{DoxyCompactList}\small\item\em Returns the C\+A\+Nx\textquotesingle{}s last error code (L\+EC). \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga6903eecbec40eb1361d915ddde9a3274}{C\+A\+N\+\_\+\+Get\+Receive\+Error\+Counter}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx)
\begin{DoxyCompactList}\small\item\em Returns the C\+A\+Nx Receive Error Counter (R\+EC). \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___c_a_n___private___functions_ga85ee0c35bf7ca15d4e4c862eef534843}{C\+A\+N\+\_\+\+Get\+L\+S\+B\+Transmit\+Error\+Counter}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx)
\begin{DoxyCompactList}\small\item\em Returns the L\+SB of the 9-\/bit C\+A\+Nx Transmit Error Counter(\+T\+E\+C). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_gad1a8b2499a780b5bfa4accb3597b02f4}{C\+A\+N\+\_\+\+I\+T\+Config}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint32\+\_\+t C\+A\+N\+\_\+\+IT, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified C\+A\+Nx interrupts. \end{DoxyCompactList}\item 
Flag\+Status \mbox{\hyperlink{group___c_a_n___private___functions_ga2faad96caf823ef463cc5b5b25c480bb}{C\+A\+N\+\_\+\+Get\+Flag\+Status}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint32\+\_\+t C\+A\+N\+\_\+\+F\+L\+AG)
\begin{DoxyCompactList}\small\item\em Checks whether the specified C\+AN flag is set or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga2c01646d5d3a2d7045e8dd71f58f8742}{C\+A\+N\+\_\+\+Clear\+Flag}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint32\+\_\+t C\+A\+N\+\_\+\+F\+L\+AG)
\begin{DoxyCompactList}\small\item\em Clears the C\+AN\textquotesingle{}s pending flags. \end{DoxyCompactList}\item 
I\+T\+Status \mbox{\hyperlink{group___c_a_n___private___functions_ga9aca05b3013e1b3438f3559f80b33c82}{C\+A\+N\+\_\+\+Get\+I\+T\+Status}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint32\+\_\+t C\+A\+N\+\_\+\+IT)
\begin{DoxyCompactList}\small\item\em Checks whether the specified C\+A\+Nx interrupt has occurred or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___c_a_n___private___functions_ga30bf7ac0c1793f6622a4a1adbb7dbc8a}{C\+A\+N\+\_\+\+Clear\+I\+T\+Pending\+Bit}} (C\+A\+N\+\_\+\+Type\+Def $\ast$C\+A\+Nx, uint32\+\_\+t C\+A\+N\+\_\+\+IT)
\begin{DoxyCompactList}\small\item\em Clears the C\+A\+Nx\textquotesingle{}s interrupt pending bits. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file provides all the C\+AN firmware functions. 

\begin{DoxyAuthor}{Author}
M\+CD Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V3.\+5.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
11-\/March-\/2011
\end{DoxyDate}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
T\+HE P\+R\+E\+S\+E\+NT F\+I\+R\+M\+W\+A\+RE W\+H\+I\+CH IS F\+OR G\+U\+I\+D\+A\+N\+CE O\+N\+LY A\+I\+MS AT P\+R\+O\+V\+I\+D\+I\+NG C\+U\+S\+T\+O\+M\+E\+RS W\+I\+TH C\+O\+D\+I\+NG I\+N\+F\+O\+R\+M\+A\+T\+I\+ON R\+E\+G\+A\+R\+D\+I\+NG T\+H\+E\+IR P\+R\+O\+D\+U\+C\+TS IN O\+R\+D\+ER F\+OR T\+H\+EM TO S\+A\+VE T\+I\+ME. AS A R\+E\+S\+U\+LT, S\+T\+M\+I\+C\+R\+O\+E\+L\+E\+C\+T\+R\+O\+N\+I\+CS S\+H\+A\+LL N\+OT BE H\+E\+LD L\+I\+A\+B\+LE F\+OR A\+NY D\+I\+R\+E\+CT, I\+N\+D\+I\+R\+E\+CT OR C\+O\+N\+S\+E\+Q\+U\+E\+N\+T\+I\+AL D\+A\+M\+A\+G\+ES W\+I\+TH R\+E\+S\+P\+E\+CT TO A\+NY C\+L\+A\+I\+MS A\+R\+I\+S\+I\+NG F\+R\+OM T\+HE C\+O\+N\+T\+E\+NT OF S\+U\+CH F\+I\+R\+M\+W\+A\+RE A\+N\+D/\+OR T\+HE U\+SE M\+A\+DE BY C\+U\+S\+T\+O\+M\+E\+RS OF T\+HE C\+O\+D\+I\+NG I\+N\+F\+O\+R\+M\+A\+T\+I\+ON C\+O\+N\+T\+A\+I\+N\+ED H\+E\+R\+E\+IN IN C\+O\+N\+N\+E\+C\+T\+I\+ON W\+I\+TH T\+H\+E\+IR P\+R\+O\+D\+U\+C\+TS.

\doxysubsubsection*{\begin{center}\copyright{} C\+O\+P\+Y\+R\+I\+G\+HT 2011 S\+T\+Microelectronics\end{center} }